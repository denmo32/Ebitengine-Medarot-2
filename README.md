プロジェクトファイル構成と責務一覧
main.go

    役割: プログラムの起動（エントリーポイント）

    主な処理:

        ウィンドウの初期設定 (サイズ、タイトルなど)。

        フォントやCSVデータなど、グローバルなリソースの読み込み。

        Game オブジェクトの生成。

        ebiten.RunGame() を呼び出し、ゲームループを開始する。

    いつ触るか: ウィンドウ設定を変更したい時や、起動時のリソース読み込みを追加したい時。

game.go

    役割: ゲーム全体の進行管理と状態遷移

    主な処理:

        Game 構造体の定義。

        メインの Update / Draw ループ。

        StatePlaying, StatePlayerActionSelect などのゲーム全体の状態 (GameState) を管理。

        各フレームで updateProgress や processReadyQueue などの処理を適切な順序で呼び出す。

        ゲームの勝利・敗北判定 (checkGameEnd)。

    いつ触るか: ゲームの基本的な流れやルールを変更したい時。新しいゲーム状態（例：ポーズ画面）を追加したい時。

types.go

    役割: プロジェクト全体で使われる型定義の集約

    主な処理:

        Medarot, Part, Medal などの主要な構造体の定義。

        MedarotState, GameState, TeamID などの定数（enum）の定義。

        設定ファイル Config の構造体定義。

    いつ触るか: メダロットやパーツに新しいステータスを追加したい時。新しい種類の定数を定義したい時。

config.go

    役割: ゲームバランスやUIの固定値を管理

    主な処理:

        ダメージ計算の係数、ゲーム速度、UIの色やサイズなどの「マジックナンバー」を定義。

        LoadConfig 関数でこれらの設定値を初期化する。

    いつ触るか: ゲームのバランス調整を行いたい時。UIの見た目を変更したい時。

csv_loader.go

    役割: data ディレクトリにあるCSVファイルの読み込み

    主な処理:

        medals.csv, parts.csv, medarots.csv を読み込み、Goの構造体に変換する。

    いつ触るか: CSVのフォーマットが変わった時や、新しい種類のCSVファイルを追加する時。

medarot.go

    役割: 「メダロット」単体に関するすべてのロジック

    主な処理:

        メダロットの生成（InitializeAllMedarots, NewMedarot）。

        メダロットの状態変化（ChangeState）。

        メダロットの行動（SelectAndStartCharge, StartCooldown, ExecuteAction）。

        ダメージ計算や命中判定などのヘルパーメソッド。

    いつ触るか: メダロットの新しいアクションを追加したい時。ダメージ計算式などを変更したい時。

ai.go

    役割: 敵（AI）の思考ロジック

    主な処理:

        aiSelectAction で、どのパーツを使い、誰をターゲットにするかを決定する。

        ターゲット候補をリストアップする (getTargetCandidates)。

    いつ触るか: AIを賢くしたい時（例：弱っている敵を狙う、相性の良い攻撃を選ぶなど）。

ui.go

    役割: UI全体の構築と制御

    主な処理:

        NewUI で、情報パネルやバトルフィールドなど、画面全体のレイアウトを構築する。

        モーダルウィンドウやメッセージウィンドウの表示/非表示を管理する (Show/Hide系メソッド）。

    いつ触るか: 画面全体のレイアウトを変更したい時。新しいUI要素（例：設定画面）を追加する時。

ui_*.go ファイル群 (ui_action_modal.go, ui_info_panels.go, etc.)

    役割: 個別のUIコンポーネントの生成

    主な処理:

        createActionModalUI のように、特定のUI部品（ボタン、テキスト、パネルなど）を組み立てる。

    いつ触るか: 特定のUI部品（行動選択モーダルなど）のデザインや中身を変更したい時。

battlefield_widget.go

    役割: バトルフィールドの描画ロジック

    主な処理:

        メダロットアイコンの座標計算と描画。

        ホームマーカーや実行ラインの描画。

        アイコン周りのゲージや状態インジケーターの描画。

    いつ触るか: バトルフィールドの見た目や、アイコンの動き方を変更したい時。